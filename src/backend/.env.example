# vxMailAgent Backend Example Environment Variables
# Copy to `.env` and fill in with real secrets for local/dev/prod use.

# === Google OAuth2 ===
# Provider (Gmail) OAuth client — used for linking Gmail accounts and refreshing tokens
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/oauth/callback # Must match Google Cloud Console exactly

# Login (OIDC) OAuth client — used ONLY for app login sessions. Keep this separate from provider client above.
# Redirect URI must match your FRONTEND callback route (/oauth/callback)
GOOGLE_LOGIN_CLIENT_ID=your-google-login-oauth-client-id
GOOGLE_LOGIN_CLIENT_SECRET=your-google-login-oauth-client-secret
GOOGLE_LOGIN_REDIRECT_URI=http://localhost:3000/oauth/callback

# === Outlook OAuth2 ===
OUTLOOK_CLIENT_ID=your-outlook-oauth-client-id
OUTLOOK_CLIENT_SECRET=your-outlook-oauth-client-secret
OUTLOOK_REDIRECT_URI=http://localhost:3000/oauth/callback # Must match Azure Portal exactly

# === Application Secrets ===
VX_MAILAGENT_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef # 64 hex chars (for encrypted storage)

# === Optional ===
PORT=3001 # Backend server port
# Path to persistent data directory (accounts, agents, etc.). Must be absolute or relative to backend execution path. If unset, defaults to ../data
VX_MAILAGENT_DATA_DIR=./data
CORS_ORIGIN=http://localhost:3000 # Frontend origin for CORS (use * only for local/dev if necessary)

# === OpenAI API ===
OPENAI_API_KEY=your-openai-api-key

# === Diagnostics / Tracing ===
# Persist traces to disk (true/false). If false, spans/traces are not stored.
TRACE_PERSIST=true
# Include redacted request/response payloads in spans (true/false)
TRACE_VERBOSE=false
# Maximum payload size per request/response (bytes)
TRACE_MAX_PAYLOAD=32768
# Maximum number of spans per trace to prevent unbounded growth
TRACE_MAX_SPANS=1000
# Comma-separated case-insensitive field names to redact from payloads
TRACE_REDACT_FIELDS=authorization,api_key,access_token,refresh_token,set-cookie,cookie
# Retention settings: max traces to keep and TTL in days (older traces pruned)
TRACE_MAX_TRACES=1000
TRACE_TTL_DAYS=7

# === Provider Events (audit) Retention ===
# Maximum number of provider events to retain and TTL in days
PROVIDER_MAX_EVENTS=5000
PROVIDER_TTL_DAYS=7
